<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>名片設定檔產生器 | Admin Tool</title>
    <style>
        /* 簡單的左右分割佈局 */
        body { display: flex; font-family: sans-serif; height: 100vh; margin: 0; }
        .panel { flex: 1; padding: 20px; overflow-y: auto; }
        .left { background: #f4f4f4; border-right: 1px solid #ddd; }
        .right { background: #2d2d2d; color: #fff; position: relative; }
        
        .form-group { margin-bottom: 15px; }
        label { display: block; margin-bottom: 5px; font-weight: bold; }
        input, textarea { width: 100%; padding: 8px; box-sizing: border-box; }
        
        pre { font-family: monospace; white-space: pre-wrap; word-wrap: break-word; }
        
        .copy-btn {
            position: absolute; top: 10px; right: 10px;
            padding: 10px 20px; background: #007bff; color: white;
            border: none; cursor: pointer; font-weight: bold;
        }
        .copy-btn:active { background: #0056b3; }
        
        h2 { border-bottom: 2px solid #ccc; padding-bottom: 10px; }
    </style>
</head>
<body>

    <div class="panel left">
        <h2>1. 輸入您的資料</h2>
        
        <div class="form-group">
            <label>姓名 (Name)</label>
            <input type="text" id="inp-name" placeholder="Jasper" oninput="generate()">
        </div>
        <div class="form-group">
            <label>職稱 (Title)</label>
            <input type="text" id="inp-title" placeholder="MIS Student" oninput="generate()">
        </div>
        <div class="form-group">
            <label>簡介 (Bio)</label>
            <textarea id="inp-bio" rows="3" oninput="generate()"></textarea>
        </div>

        <h3>社群連結 (沒填寫會自動隱藏)</h3>
        <div class="form-group">
            <label>Instagram URL</label>
            <input type="text" id="inp-ig" class="link-input" data-key="instagram" oninput="generate()">
        </div>
        <div class="form-group">
            <label>LinkedIn URL</label>
            <input type="text" id="inp-li" class="link-input" data-key="linkedin" oninput="generate()">
        </div>
        <div class="form-group">
            <label>GitHub URL</label>
            <input type="text" id="inp-gh" class="link-input" data-key="github" oninput="generate()">
        </div>
        <div class="form-group">
            <label>Email</label>
            <input type="text" id="inp-email" class="link-input" data-key="email" placeholder="mailto:xxx@gmail.com" oninput="generate()">
        </div>
    </div>

    <div class="panel right">
        <h2>2. 複製以下代碼</h2>
        <button class="copy-btn" onclick="copyCode()">一鍵複製代碼</button>
        <pre><code id="output-code"></code></pre>
    </div>

    <script>
        function generate() {
            // 1. 抓取基本資料
            const name = document.getElementById('inp-name').value;
            const title = document.getElementById('inp-title').value;
            const bio = document.getElementById('inp-bio').value;

            // 2. 抓取連結資料 (只抓有填寫的)
            const linkInputs = document.querySelectorAll('.link-input');
            const linksObj = {};
            
            linkInputs.forEach(input => {
                if (input.value.trim() !== "") {
                    linksObj[input.dataset.key] = input.value.trim();
                } else {
                    // 為了保持 config 結構完整，也可以留空字串，看你後端邏輯
                    linksObj[input.dataset.key] = "";
                }
            });

            // 3. 組裝 Object
            const profile = {
                info: {
                    name: name,
                    title: title,
                    avatar: "avatar.jpg", // 預設值
                    bio: bio
                },
                links: linksObj,
                theme: {
                    primaryColor: "#0047BA"
                }
            };

            // 4. 生成字串，並加上 const 宣告
            // JSON.stringify(obj, null, 4) 會自動縮排，讓代碼易讀
            const codeString = `const USER_PROFILE = ${JSON.stringify(profile, null, 4)};`;

            // 5. 顯示
            document.getElementById('output-code').textContent = codeString;
        }

        function copyCode() {
            const code = document.getElementById('output-code').textContent;
            navigator.clipboard.writeText(code).then(() => {
                alert("代碼已複製！請貼上到 config.js 檔案中。");
            });
        }

        // 初始化執行一次
        generate();
    </script>
</body>
</html>
